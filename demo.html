<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>stream.js</title>
  </head>

  <body>
    <script src="stream.js"></script>
    <script>
      var a = new Stream.EventStream();
      var b = new Stream.EventStream();
      var c = a.merge(b);
      c.subscribe(function(value) {
        console.log(value);
      });
      b.publish('b');
      a.publish('a');

      var d = new Stream.EventStream();
      d.scan(0, function(currentValue, newValue) {
        return currentValue + newValue;
      }).subscribe(function(value) {
        console.log(value);
      });
      d.publish(1);
      d.publish(2);
      d.publish(3);

      var e = new Stream.EventStream();
      e.filter(function(value) {
        return value >= 0;
      }).subscribe(function(value) {
        console.log(value);
      });
      e.publish(1);
      e.publish(-2);
      e.publish(3);

      var f = new Stream.EventStream();
      f.map(function(value) {
        return value * 2;
      }).subscribe(function(value) {
        console.log(value);
      });
      f.publish(1);
      f.publish(2);

      var g = new Stream.EventStream();
      var h = new Stream.EventStream();
      g.combine(h, function(gValue, hValue) {
        return gValue + hValue;
      }).subscribe(function(value) {
        console.log(value);
      });
      g.publish(1);
      h.publish(2);
      g.publish(3);
      h.publish(4);

      var i = new Stream.EventStream();
      var j = new Stream.EventStream();
      i.sampledBy(j, function(iValue, jValue) {
        return iValue + jValue;
      }).subscribe(function(value) {
        console.log(value);
      });
      i.publish(1);
      j.publish(2);
      i.publish(3);
      j.publish(4);
    </script>
  </body>
</html>
